## 本周任务
制作镜像：先下载要制作镜像的iso文件，启动系统  
用命令行/dashboard创建镜像  
查看镜像的信息、服务  
创建实例  
尝试用xshell或者桌面远程连接实例（安全组）  

## 配置镜像

可以使用qemu命令来创建镜像  

创建一个镜像，容量10G。
```
qemu-img create -f qcow2 ubt.qcow2 10G
```
使用以下命令将会使得iso在虚拟环境中运行。 -m 指定可使用内存2G
```
qemu-system-x86_64 -m 2G ubt.qcow2 -cdrom ubt16.iso
```


然后就会弹出各种操作系统的安装画面，跟之前没什么不同，当最后后安装完毕，就可以关闭虚拟的系统。  
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/p4.PNG)

这时剩下的就是一个ubt.qcow2文件，这就是我们要的镜像  


iso格式一般是安装系统用，是对光盘的模拟，一般装载的是未生成的系统，可以说是一个安装包。
而这个是已经装好的系统之后固定下来的“快照”，是一块磁盘空间的模拟，包含包括硬盘空间等多个信息，加载后可以直接使用。
使用qcow2等虚拟机格式可以免去系统安装的过程，快速部署。



## 上传镜像
为了节省空间，上传的
![upload](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/q1.PNG)



## 失败
无法创建相应的实例，不得不重装，之后重装了两天，各种出问题，什么都做不了。



## 坚持不懈，爆肝熬夜
再次研究ta给的一键安装脚本，这次终于安装成功了！


## 再次上传镜像

上传完运行，ubuntu14完美运行在我们的虚拟机上
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/q5.PNG)

## 配置外部网卡
在vmware的设中，我将外部的网卡调为桥接模式，从而让openstack外部网络真正的接到了我的路由器的子网中。
这样通过我分配的浮动ip就可以用xshell访问客户端。


## 链接实例
xshell链接时慢到惊人，比我买的最辣鸡的VPS都卡，毕竟是嵌套虚拟化，不好说啥。
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/p6.PNG)
