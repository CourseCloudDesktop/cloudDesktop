## 又是只有我一个人爆肝写，力不从心

## 镜像

创建镜像：
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/q2.PNG)

开始虚拟化加载cdrom
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/q3.PNG)

像正常安装server那样安装：
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/p4.PNG)


## openstack

打开 项目-》计算-》映像  

创建新映像  

选择文件上传到openstack上

为其设置最小磁盘大小，最下内存大小等等，创建。等openstack保存好就可以去创建实例了。  


## 实例创建
和task2没有太多不同。ubuntu的话可以分配多点资源。

### 使用官方镜像的注意 
官方镜像并不支持直接密码登陆，需要在创建实例时设置ssh key，如果没有就新建，  
新建后会弹出窗口告诉你下载私钥，记住，下载私钥就这一次！之后都不能下了。

实例运行如图：
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/q5.PNG)

## 访问实例
然而我们我们想要访问这个实例怎么办呢？  

这时我们先关闭虚拟机，打开虚拟机设置，我们之前设置网络适配器2为桥接模式，这样虚拟机的网卡2（外网网卡）就和主机在同一子网。
如果openstack里设置的外部网络的ip也是跟主机所在的网络相符，那么我们就可以通过浮动ip把实例直接接到物理主机的同一子网下。


在这里为创建的实例分配一个浮动ip 192.168.31.4：
通过xshell连接，可以直接同实例沟通。

### 使用官方镜像的注意
各大cloud image默认账号都不是root，ubuntu是ubuntu， debian是debian，其他请参阅[openstack官方说明](https://docs.openstack.org/image-guide/obtain-images.html)  


xshell连接，因为嵌套虚拟化等等原因，速度极慢
![link](https://github.com/CourseCloudDesktop/cloudDesktop/raw/kek-develop/task3/pictures/p6.PNG)
