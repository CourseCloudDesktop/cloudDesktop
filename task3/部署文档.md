# Task3 部署文档
总体来说，部署的过程跟task2中部署cirror镜像差不多，只不过镜像换成了平时更常用的系统
## 1. 安装过程
### 步骤一：下载镜像文件
> **注意** 如果是用vinzor的集成脚本来安装的OpenStack，对应的镜像尽量下32位的，因为好像装64位的总会迷之出bug

- 下载Ubuntu 14.0.5镜像
  - iso镜像：[链接](https://www.ubuntu.com/download/alternative-downloads)
  - img镜像：[连接](http://cloud-images.ubuntu.com/trusty/current/)
  > iso跟img镜像并没有什么区别。在这次任务中使用的是Ubuntu 14.0.5 Desktop的iso镜像进行安装。
### 步骤二：dashboard中创建镜像
- 登录dashboard，点击项目->计算->映像，点击创建映像
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/1.PNG)
- 输入创建的映像的名称，映像源选择映像文件,格式选择QCOW2-QEMU模拟器 **不管镜像是img格式的还是iso格式的，格式都选这一个**，设置最小磁盘容量，这个看个人硬件水平。
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/2.PNG)
  > 这一步跟利用命令行的qemu命令创建系统盘和kvm命令一样的，用dashboard来装更加的方便
### 步骤三：创建实例
- 映像创建成功之后，点击启动，创建新的实例
  ![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/3.PNG)
- 根据提示设置新实例的相关信息
  - 输入实例名称
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/4.PNG)
  - 设置flavor，即给这个新的实例分配多少的计算资源，一共有五种档次，按个人硬件水平选择。在这里选择的是m1.tiny，因为选择太低的配置可能会导致实例创建失败。
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/5.PNG)
  - 设置网络，不要选择外部网络，而是选择虚拟机所在的子网。点+，选择合适的网络
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/6.PNG)
  - 设置安全组，添加SSH，这是为了后面利用xshell远程连接云主机服务的。
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/7.PNG)
	> **如何设置安全组？** [参见TA发的第一个教程博客](https://blog.csdn.net/liuhui_charmingglobe/article/details/60142973) 	
  - 全部设置好之后，就点击启动实例
### 步骤四：启动实例
- 点击实例，可以看到刚刚创建的实例已经在运行了
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/8.PNG)
- 点击实例名字，然后点击控制，经过漫长等待应该可以见到熟悉的Ubuntu安装画面，在这里我们就可以跟像在本地操作Ubuntu一样操作这个云主机了
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/9.PNG)
	> **注意** 电脑配置不好的话，还是装Ubuntu Server好了，Desktop版本实在是太卡了。
### 步骤五：远程连接实例
该步骤是在主机（一般都是windows或者mac os）利用某个软件来对部署在OpenStack上的实例进行远程操作，putty和VNC这些软件都是用来实现这个功能的
- 下载一个putty软件，确保主机安装了ssh服务
- 输入实例的ip地址和端口号（均为22，不可改变），然后点击open进行连接。
	>**注意** 这里我连接的是之前安装的cirror实例，因为Ubuntu Desktop实在是太卡了
	
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/10.PNG)
- 连接中
 ![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/11.PNG)
- 连接失败！
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/12.PNG)
- 看一眼日志，根本就没连上OpenStack上的实例
	![](https://github.com/CourseCloudDesktop/cloudDesktop/raw/wcl-develop/task3/screenshot/13.PNG)
- **解决方案？** 暂时没想到。目前看来应该是网络配置问题，dashboard上面已经显示正确配置了路由器、外网和内网，但是在虚拟机中并不能ping通外网。如果成功的话，在这个putty的界面就可以像在本地操作Ubuntu Server系统一样对远程实例进行操作了，都是命令行执行。
## 2. 常见问题及解决方案
### 2.1 执行实例时，控制台卡在 booting from hard disk界面
这个应该是版本问题，用64位的16.0.5 Desktop版本部署就会遇到这个情况，改用32位的就行了

### 2.2 实例运行起来很卡
电脑问题，无解

