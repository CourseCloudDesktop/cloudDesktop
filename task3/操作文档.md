
# 操作文档
## **一、首先把任务2完成，然后才是任务3的部署**
在经历了无数次的挣扎之后终于把任务2的锅补完了，只能说打不死的小强确实挺坚强的哈~ 哈哈哈，下面是任务2的部署文档
### 1、任务二的任务：
- 用集成脚本安装openstack，能够成功打开dashboard
- 制作镜像
- 虚拟网络

### 2、任务2具体描述：
1. 成功搭建openstack环境后，通过dashboard登录。
2. 登陆后查看系统信息（看启动了什么服务）
3. 测试网络配置是否正确
    - 上传cirros镜像、创建flavor、创建vxlan网络、ext_net网络、路由
    - 创建实例
    - 添加安全组规则（ssh、icmp）
    - 尝试从不同实例之间互相ping。看是否成功
    具体参考这篇博客的后半部分：
    https://blog.csdn.net/dylloveyou/article/details/77148560 
    
### 3、任2务完成情况
| 编号  | 项目内容 | 完成情况  | 未完成原因  | 措施  | 如何解决安装过程中遇到的问题 |
| :--- | :--------| :--------|:------------|:------| :-----------|
| 1    | 安装Ubuntu server虚拟机 |  100%  | / | /| / |
| 2    |   安装部署OpenStack|  100%  | / |/ | 详见"问题与解决方法" |
| 3    |   网络配置| 100%  | / | /| /|
| 4    |   制作镜像| 100% |  / | /| /|
| 5    |   虚拟网络| 100% |  / | /| /|

### 4、任务2的部署文档
#### 1、用集成脚本安装OpenStack
##### 1.1安装
运行安装脚本：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/images/1.png" width="50%" height = "50%">

##### 1.2打补丁
按照要求打补丁

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/images/3.png" width="50%" height = "50%">

这里就只放一个补丁的运行过程了

#### 2、在浏览器端完成相关的配置
##### 2.1 验证：打开Dashboard
登录界面如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/4.png" width="70%" height = "70%">

进入之后的界面首页显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/5.png" width="70%" height = "70%">

##### 2.2 查看服务
查看服务显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/6.png" width="70%" height = "70%">

计算服务显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/7.png" width="70%" height = "70%">

网络代理服务显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/8.png" width="70%" height = "70%">

##### 2.3 上传镜像
<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/9.png" width="70%" height = "70%">

#### 2.4 添加flavors数
配置信息如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/10.png" width="70%" height = "70%">

配置结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/11.png" width="70%" height = "70%">

#### 2.5 为admin用户创建一个VXLAN网络
网络基本配置显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/12.png" width="70%" height = "70%">

创建结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/13.png" width="70%" height = "70%">

为刚刚创建的网络配置子网信息：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/14.png" width="70%" height = "70%">

注：这里的网关ip不是随意乱填的，是在服务端查看了IP之后，填上对应的ip地址。


<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/15.png" width="70%" height = "70%">

注：配置时分配给子网的网段不是胡乱填写的，时查看虚拟机的配置之后，选择虚拟机网段内的ip地址分配给子网的。


子网的配置结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/16.png" width="70%" height = "70%">

#### 2.6 为demo用户创建一个VXLAN网络

网络基本配置信息如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/17.png" width="70%" height = "70%">

为刚创建的网络配置子网信息：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/18.png" width="70%" height = "70%">

这里的子网网段ip同样不是胡乱选择的。

创建结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/19.png" width="70%" height = "70%">

#### 2.7 配置路由信息
路由的基本配置信息显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/20.png" width="70%" height = "70%">

配置结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/21.png" width="70%" height = "70%">

#### 2.8 配置网络信息
查看网络拓扑如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/22.png" width="70%" height = "70%">

为路由器添加网络接口：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/23.png" width="70%" height = "70%">

最终用户通过刚刚路由器添加的接口连接到了云上，显示结果如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/24.png" width="70%" height = "70%">

#### 2.9 创建实例
实例的基本配置信息如下所示：
实例的名字和可用区域配置：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/25.png" width="70%" height = "70%">

实例源选用在之前的步骤中上传的镜像cirros:

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/26.png" width="70%" height = "70%">

flavor选择之前创建的m：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/27.png" width="70%" height = "70%">

最后网络选择配置的内网：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/28.png" width="70%" height = "70%">

创建实例1的结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/29.png" width="70%" height = "70%">

实例2配置方法与实例1类似，不再赘述，最终的配置结果如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/30.png" width="70%" height = "70%">

#### 2.10 添加安全组等
创建安全组：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/31.png" width="70%" height = "70%">

添加组规则：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/32.png" width="70%" height = "70%">

添加管理组安全规则：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/33.png" width="70%" height = "70%">

最终配置结果显示如下所示：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/34.png" width="70%" height = "70%">

配置成功后查看网络拓扑：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/35.png" width="70%" height = "70%">

发现两个实例都成功的连接到了云上。

#### 2.11 不同实例之间的互ping
查看实例：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/36.png" width="70%" height = "70%">

实例2 ping 实例1：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/37.png" width="70%" height = "70%">

实例1 ping 实例2：

<img src = "https://github.com/CourseCloudDesktop/cloudDesktop/blob/yxf-develop/task3/image/38.png" width="70%" height = "70%">

发现可以成功ping通，至此任务2就算圆满的完成了。
任务2实在是花费了很多的时间，从安装openstack到最终的配置，其中最难的还是安装OpenStack部分的内容，安装的过程从最开始的尝试手动配置环境安装失败，到使用各种不同版本的Ubuntu安装TA给的集成安装部署文档，从一开始的分给虚拟机的内存和硬盘不够导致无法带动OpenStack，到最终各种尝试失败之后选择使用Ubuntu server 14来安装OpenStack，这一个过程确实真的挺漫长的，主要还是个人能力不够吧，以后还要多努力一些才行啊。

## **二、任务三**
(已完成)</br>
1、用集成脚本安装OpenStack</br>
1.1安装</br>
1.2验证：打开Dashboard</br>
1.3验证：登陆主界面</br>

2、查看系统服务</br>
2.1 查看服务</br>
2.2 查看计算服务</br>
2.3 查看网络代理服务</br>

3、测试网络配置</br>
3.1 创建镜像</br>
3.2 创建flavor</br>


任务三遇到的问题</br>


## **三、问题与解决办法**
### 1、任务二遇到的问题与解决办法
1、安装OpenStack失败

### 2、任务三遇到的问题与解决办法

1、dashboard突然打不开，挣扎一天了毫无进展，任务三无法继续。

![](images/err1.png)

2、尝试apt-get update和安装一系列依赖包，失败

![](images/err2.png)


2. 正在考虑重装。


	


