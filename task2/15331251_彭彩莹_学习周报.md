## 学习周报2

这次跟着安装手册，以及在队友的帮助下终于成功安装好了OpenStack，使用的部署方式是Neutron模式单节点部署。

###OpenStack的网络分类

#OpenStack中的网络类型根据用途可分为三类：
- 内部网络（Internal network/Private network）
内部网络用于VM之间的互联。
- 管理网络（Management network）
管理网络用于云平台内部各组件服务之间的互联。
- 外部网络（External network/Public network）
外部网络用于云平台与其它网络相连，配置客户真实物理网络的FloatingIP段地址。
在两种部署模式中：
Nova Network模式：内部网络网卡不可配置IP，外部网络和管理网络可以使用同一网卡

Neutron模式：外部网络网卡不可配置IP，内部网络和管理网络可以使用同一网卡

###浮动ip
- floating IP 是虚拟网络对应的外部网络上的IP，能够让外网直接访问租户网络中的 instance，这是通过在 router 上应用 iptalbes 的 NAT 规则实现的
- floating IP 是配置在 router 的外网 interface 上的，而非 instance
- 浮动ip默认情况下需要手动从地址池里抓取然后赋给实例，用户选取好ip地址后，可以随意赋给实例

###在界面创建一个实例需要用到什么组件
在界面创建一个实例需要创建密钥对，添加安全组规则，选择镜像，分配网络，绑定浮动ip；这些过程中用到的组件有：
keystone、Nova、Glance、Neutron。
![tupian](https://img-blog.csdn.net/20171212150244678?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU0xfV29ybGQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)
如上图，
keystone通过用户请求认证信息，并生成token（访问资源的令牌）返回给对应的认证请求，用户使用token，向Nova发送分配VM的请求，Nova验证token后向glance发送token，并请求镜像，然后glance向keystone验证token，通过后返回镜像，nova再将token传递给neutron，并请求网络，neutron向keystone验证token后，将token发送给nova并向nova验证用户，然后在neutron处获取网络信息，neutron给nova发送成功的响应，最后nova再给用户发回成功的响应
