
## 上周未完成的工作

上次作业中我是采用手动部署的方法，按照官网上的方法一步一步地来，但是在这个过程中总是会出现各种奇怪的问题，网络上也没有相关的资料可以参考，导致最后部署失败。
在这次作业之前，参考了其他小组一些部署成功的案例，发现都是采用Devstack的方式自动化部署，最后自己也尝试使用Devstack的方式，在一些参考资料的帮助下，最后成功部署了，部署的过程基本上就和下面的教程的方法类似了，不过还是有一点不同，教程中使用的是Ubuntu 14.04 Server版本，我使用的是Ubuntu 14.04 Desktop版本，但是配置过程大致相同，手动安装了的一个ssh Server(虽然现在我也不知道这个东西在配置过程是干嘛用的，好像没有体现出来)，参考教程如下：

[ubuntu下利用devstack安装openstack ocata](https://blog.csdn.net/pfztab/article/details/78632393)

[用DevStack安装OpenStack(单机)](http://www.ganecheng.tech/blog/53538203.html)

当然配置过程还是有遇到一些问题，我记得有一个问题在执行 `stack.sh`开始自动安装后，报了一个错 `git call failed`，不过好在网上使用Devstack部署的资源比较多，找到一个讲解这个问题的博客[Devstack快速部署OpenStackMitaka用户指南AllinOne(byqiqishuangcsdn)](https://www.2cto.com/net/201607/529434.html),有解决这个问题的方法，最后安装成功，打开dashboard

## 学习周报 week2
### Opensatck网络分类
在所给的部署手册上介绍到根据用途来分，可以分为以下几类：

* 内部网络（Internal network/Private network）
内部网络用于参与部署虚拟机VM之间的通信。

* 管理网络（Management network）
管理网络用于云平台内部各组件服务之间的互联，也就是用于实现OpenStack各个组件之间的通信。

* 外部网络（External network/Public network）
外部网络用于云平台与其它网络相连，通过外部网络，实现与外网的互联，需要配置客户真实物理网络的FloatingIP段地址。

顺手百度了一下，发现对于Neutron network，可以具体分为以下几种网络类型：

* VLAN network（虚拟局域网） ：基于物理 VLAN 网络实现的虚拟网络。共享同一个物理网络的多个 VLAN 网络是相互隔离的，甚至可以使用重叠的 IP 地址空间。每个支持 VLAN network 的物理网络可以被视为一个分离的 VLAN trunk，它使用一组独占的 VLAN ID。有效的 VLAN ID 范围是 1 到 4094。

* Flat network：基于不使用 VLAN 的物理网络实现的虚拟网络。每个物理网络最多只能实现一个虚拟网络。

*  local network（本地网络）：一个只允许在本服务器内通信的虚拟网络，不知道跨服务器的通信。主要用于单节点上测试。

* GRE network （通用路由封装网络）：一个使用 GRE 封装网络包的虚拟网络。GRE 封装的数据包基于 IP 路由表来进行路由，因此 GRE network 不和具体的物理网络绑定。

* VXLAN network（虚拟可扩展网络）：基于 VXLAN 实现的虚拟网络。同 GRE network 一样， VXLAN network 中 IP 包的路由也基于 IP 路由表，也不和具体的物理网络绑定。

参考：[OpenStack网络介绍][1]

### 浮动IP(Floating IP)
对于浮动ip这个概念，解释是虚拟网络对应的外部网络上的IP。我的理解就是为所创建的实例赋予的一个外网地址列表，效果就是外网能够通过它来访问我们创建在虚拟网络上的实例。

### 在界面创建实例用到的组件
创建实例就是在 Horizon中创建虚拟机(VM)
在这个过程中用到的组件包括：Horizon、Keystone、Glance、Nova，各个组件的作用如下：

> Horizon:管理虚拟机的用户界面，要求能正常运行并对外提供创建服务。

>Keystone负责授权认证、租户管理、项目权限和配额以及服务目录管理。

> Glance负责为Nova提供创建实例所需要的镜像文件。

> Nova负责虚拟机生命周期的管理，以及宿主机资源调度。

具体的过程如下：Horizon将用户的HTTP请求转换为RESTful请求，然后将RESTful请求分发给Nova API，进行实例创建。当创建后，虚拟机实例会进入Build状态，任务状态将是Spawning。这期间会将镜像文件从Glance中下载到Nova节点，并进行一些虚拟机的配置。当一切正常后，虚拟机将会进入Active状态，这样一个虚拟机实例就创建完成：



  [1]: https://www.cnblogs.com/onetwo/p/6136133.html
