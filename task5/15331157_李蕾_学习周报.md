# task5学习周报

## 本周具体工作内容  

**云桌面系统功能体验**  
- 创建固定桌面
- 创建一个课程，并创建一个对应的课程桌面，课程名称请命名为自己的分支 

**了解云桌面相关背景知识**  
- VDI概念解释以及实现原理（个人理解总结、工作流程，如果通过画图来体现，最好自己画图）
- 实现的协议介绍（spice、vnc、rdp），进行对比
- 集成脚本修改了什么配置文件导致控制台可以直接用spice而不是用vnc？（请给出相关的配置文件截图）


## 本周主要工作内容
### 已经完成工作
- **云桌面系统功能体验**  
操作过程较简单，没有遇到问题，步骤可参考部署文档。

- **VDI概念解释以及实现原理**  
VDI，全程是Virtual Desktop Infrastructure，虚拟桌面基础架构。  
其实从字面意思上可以看出与虚拟桌面有关，虚拟桌面与我们自己用的电脑设备的桌面不同，我们平时笔记本电脑桌面是本地的、运行于自己的设备上的，而虚拟桌面是运行于远程的服务器上的，用户只是通过客户端设备与虚拟桌面进行连接。虚拟桌面基础架构就是通过虚拟化技术，在远程的服务器上集中进行运算，用户通过客户端设备连接各自的虚拟桌面，客户端设备只负责输入输出和显示，计算是在服务器上进行的。  
VDI实现原理：  
!(原理)[]  
实现方式由图上按数字排序的有向曲线来看，首先是1)用户向代理请求桌面，之后2)代理向计算节点请求空闲的桌面，3)计算节点返回空闲桌面，同时4)存储用户数据的服务器也返回用户数据，5)代理将用户数据与桌面相连，最后6)将虚拟桌面返回给用户，用户分配到自己的虚拟桌面后，就可以进行一系列操作了。

- **实现的协议介绍（spice、vnc、rdp），进行对比**  
在虚拟桌面架构中，协议是很重要的，因为协议定义了服务器传输到各类终端的规则，涉及到安全，图像处理，数据压缩，网络传输协议等多个方面。  
**spice**  
Simple Protocol for Independent Computing Environment，独立计算环境简单协议。spice协议虚拟出一个图形处理设备QXL专门处理客户机的图形命令。如下图所示，spice协议架构包括客户端、服务端和相应的QXL设备、QXL驱动等，客户端运行在用户终端设备上，为用户提供桌面环境，服务端以动态连接库的形式与KVM虚拟机整合，通过SPICE协议与客户端进行通信。SPICE协议最大的特点是其架构中增加的位于Hypervisor中的QXL设备，本质上是KVM虚拟化平台中通过软件实现的PCI显示设备，利用循环队列等数据结构供虚拟化平台上的多个虚拟机共享实现了设备的虚拟化。  
!(spice)[]  
**vnc**  
Virtual Network Computing，虚拟网络计算机，是基于RFB（Remote Frame Buffer）协议进行通信的，是一个基于平台无关的简单显示协议的超级瘦客户系统，是一款优秀的远程控制工具软件。  
VNC系统由客户端，服务端和一个协议组成。  
!(vnc)[]  
VNC服务端的作用是分享其所运行机器的屏幕显示，VNC客户端观察控制服务端，与服务端交互，通过RFB协议传送服务端的原始图像到客户端，客户端传送事件消息到服务端。  
**rdp**  
Remote Desktop Protocol，远程桌面协议，是一个多通道的协议，使得客户端可以连上提供微软终端机服务的服务器端，也就是提供了客户和服务器之间的连接。RDP协议网络功能数据传送时包含五层：网络连接层、ISO数据层、虚拟通道层、加密解密层、功能数据层。  
**对比**  
适用系统上，vnc适用windows、linux；spice适用linux；rdp适用windows、linux。  
vnc主要用于linux的服务器的管理，由于无声音和usb传输，不满足于虚拟桌面的使用。spice由于在色彩、音频和usb方面，适用于虚拟桌面，主要用于虚拟机的虚拟桌面应用。rdp由于在色彩、音频、usb及本地磁盘映射方面较好，非常适用于虚拟桌面。

- **集成脚本修改了什么配置文件导致控制台可以直接用spice而不是用vnc？**  
在nova.conf文件中可以看到，关闭了vnc协议，而开启并设置了spice协议，所以控制台可以直接用spice。  
!()[vnc_false]()  
!()[spice_enable]()

### 未完成工作
- 无
### 问题与困难
- 无


## 下周工作计划
- 进行下一阶段的学习