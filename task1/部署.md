# openstack
openstack是一个全面的云服务管理平台，通过几个组件的联合运作，实现了对云计算资源的管理，可以实现大规模的扩展和灵活的资源分配。  

## keystone
 keystone是openstack的验证服务组件，使用mysql存储数据，提供身份验证，对资源进行分组，权限管理等等功能。
 
## glance
  Glance用于管理openstack中的镜像，通过它可以很方便地获取镜像的信息，系统性地管理操作系统镜像。
  
## Nova
  Nova用于管理计算资源，为实例分配所需的资源。
  
## neutron
neutron是openstack的网络服务，功能强大复杂，支持多种网络拓扑，灵活性强。



部署经过：
使用devstack部署

## 首先安装各种工具git
    sudo apt-get install git
 
 
## clone到本地
    git clone http://git.trystack.cn/openstack-dev/devstack.git -b stable/ocata


## cd到devstack目录中，运行脚本，创建stack用户
    sudo ./tools/create-stack-user.sh
   
## 给权限
    chown stack:stack /opt/stack -R
    
## 切换
    sudo su - stack
    
## 再devstack目录创建一个local.conf
    vim local.conf

## 填写配置
注意我的HOST_IP填的是虚拟主机在真实子网中的ip，network_gatewa填写了路由器的ip
还有网卡记得看看自己的自己网卡的名字，不一定是eth0的！
```
[[local|localrc]]

# use TryStack git mirror
GIT_BASE=http://git.trystack.cn
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git

#OFFLINE=True
RECLONE=True

# Define images to be automatically downloaded during the DevStack built process.
DOWNLOAD_DEFAULT_IMAGES=False
IMAGE_URLS="http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img"

HOST_IP=192.168.31.11


# Credentials
DATABASE_PASSWORD=123321
ADMIN_PASSWORD=123321
SERVICE_PASSWORD=123321
SERVICE_TOKEN=123321
RABBIT_PASSWORD=123321

HORIZON_BRANCH=stable/ocata
KEYSTONE_BRANCH=stable/ocata
NOVA_BRANCH=stable/ocata
NEUTRON_BRANCH=stable/ocata
GLANCE_BRANCH=stable/ocata
CINDER_BRANCH=stable/ocata


#keystone
KEYSTONE_TOKEN_FORMAT=UUID

##Heat
HEAT_BRANCH=stable/ocata
enable_service h-eng h-api h-api-cfn h-api-cw


## Swift
SWIFT_BRANCH=stable/ocata
ENABLED_SERVICES+=,s-proxy,s-object,s-container,s-account
SWIFT_REPLICAS=1
SWIFT_HASH=011688b44136573e209e


# Enabling Neutron (network) Service
disable_service n-net
enable_service q-svc
enable_service q-agt
enable_service q-dhcp
enable_service q-l3
enable_service q-meta
enable_service q-metering
enable_service neutron

## Neutron options
Q_USE_SECGROUP=True
FLOATING_RANGE="192.168.31.0/24"
FIXED_RANGE="10.0.0.0/24"
NETWORK_GATEWAY="10.0.0.2"
Q_FLOATING_ALLOCATION_POOL=start=192.168.31.150,end=192.168.31.180
PUBLIC_NETWORK_GATEWAY="192.168.31.1"
Q_L3_ENABLED=True
PUBLIC_INTERFACE=ens33
Q_USE_PROVIDERNET_FOR_PUBLIC=True
OVS_PHYSICAL_BRIDGE=br-ex
PUBLIC_BRIDGE=br-ex
OVS_BRIDGE_MAPPINGS=public:br-ex

# #VLAN configuration.
Q_PLUGIN=ml2
ENABLE_TENANT_VLANS=True

# Logging
LOGFILE=/opt/stack/logs/stack.sh.log
VERBOSE=True
LOG_COLOR=True
SCREEN_LOGDIR=/opt/stack/logs

```
之后是
    ./stack.sh
装了一个下午。。
