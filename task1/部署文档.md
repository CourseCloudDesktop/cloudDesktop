# OpenStack controller节点的部署





# OpenStack compute节点的部署


## 部署openstack环境准备

默认的软件包源是国外的，速度相对来说比较慢，所以我们修改文件`/etc/apt/sources.list`。

`sed -i 's/us.archive/cn.archive/g' /etc/apt/sources.list
`

再更新一下。

`apt-get update`


## 下载devstackOcata版

使用国内提供的OpenStack的github的mirror：http://git.trystack.cn， 并采用ocata稳定版。

`git clone http://git.trystack.cn/openstack-dev/devstack.git -b stable/ocata`



## 创建stack用户

```
cd devstack/tools/
./create-stack-user.sh
cd ../.. 
mv devstack /opt/stack 
chown -R stack:stack /opt/stack/devstack
```

## 配置pip源

```
mkdir .pip 
cat >> .pip/pip.conf <<EOF 
[global] 
trusted-host =  pypi.douban.com 
index-url = http://pypi.douban.com/simple
EOF
```


## 配置local.conf文件

配一下密码和镜像之类的。

```
[[local|localrc]] 
ADMIN_PASSWORD=emmm 
DATABASE_PASSWORD=$ADMIN_PASSWORD 
RABBIT_PASSWORD=$ADMIN_PASSWORD 
SERVICE_PASSWORD=$ADMIN_PASSWORD 

  
# use TryStack git mirror 
GIT_BASE=http://git.trystack.cn 
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git 
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git
```


## 安装（尚未完成）

`./stack.sh`
