# 部署文档

## 子任务1：虚拟网络部分配置

虚拟机实例能够ping通外网
能够用xshell或者putty或者SSH命令来连接实例

**步骤一、设置外部网卡的网络适配器的网络连接方式为桥接模式**

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5.png)

可以看到eth1的网络与主机网络在同一个网段：

eth1的网络信息

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/eth1%20%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF.png)

主机的网络信息

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%B8%BB%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF.png)

**步骤二、更改外部网络为主机网络所在网段**

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE.png)

**步骤三、更改路由器的外部网络，清除网关**

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E8%B7%AF%E7%94%B1%E5%99%A8.png)

**步骤四、更改实例的浮动ip，启动实例，查看能否ping通外网**

实例的浮动ip为192.168.199.4，与主机的ip在同一网段

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E5%AE%9E%E4%BE%8B.png)

ping 外网，成功ping通

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/ping%E5%A4%96%E7%BD%91.PNG)


**步骤五、通过xshell登录实例**

由步骤四可以看到实例的浮动ip为192.168.199.4，在xshell中创建会话

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/xshell%E8%BF%9E%E6%8E%A5.png)

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/xshell%E8%BF%9E%E6%8E%A52.png)

可以看到成功登录

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/xshell.PNG)


## 子任务2：镜像制作

制作一个centos或者ubuntu或者windows镜像，镜像中创建一个文件，文件内容写入小组的branch名称
要求开机就能启动镜像，无需重复安装过程，并且开启实例后可以看到之前创建的文件

因与task3内容重复，且我们小组在在task3中也进行了新建文档、测试镜像制作是否成功的工作，所以操作细节在此不再赘述。

开机即可启动镜像，无需重复安装过程，开启实例后需根据创建镜像时设置得账号密码登录。

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%BB%BB%E5%8A%A12-1.png?raw=true)

可以看到之前创建的名为“mlp-develop”的txt文件。

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%BB%BB%E5%8A%A12-2.png?raw=true)

文件的内容“mlp-develop”也与创建镜像时输入的一致。

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%BB%BB%E5%8A%A12-3.png?raw=true)





## 子任务3：安装云桌面

提供vindesk部署安装包，根据安装文档来安装
安装完成无报错，并且能够打开系统并截图即为任务成功
可以自行探索下相关的功能（重点操作下：如何创建一个课程桌面或者固定桌面）

**步骤一、通过ssh传输安装包至虚拟机**

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%BC%A0%E8%BE%93%E5%AE%89%E8%A3%85%E5%8C%85.png)



**步骤二、./run.sh开始安装**

可以看到成功安装，并且查看服务都成功开启了

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png)

登录http://10.0.0.129



**步骤三、更改配置，重启服务**

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E9%87%8D%E6%96%B0%E9%85%8D%E7%BD%AE.png)



**步骤四、登录系统**

- 访问控制节点ip地址，用户名：admin 密码：admin123

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2.png?raw=true)

![](https://github.com/CourseCloudDesktop/cloudDesktop/blob/mlp-develop/task4/images/%E4%B8%BB%E7%95%8C%E9%9D%A2.png?raw=true)

## 小组贡献

- 三人共同讨论解决问题，每个人都在自己的电脑上成功部署openstack和云桌面
- 部署文档由三人轮流完成





